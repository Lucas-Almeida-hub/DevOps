pipeline{
    agent any
        stages{
            stage("baixar arquivos"){
                steps {
                   git branch: 'DevOps', url: 'https://github.com/Lucas-Almeida-hub/DevOps.git'
                   sh script : "cp -R ~/workspace/Monitoramento/* arquivos/"
                }
            }
            stage("Configurando area de build "){
                steps {
                    
                    ansiblePlaybook inventory: 'host', playbook: 'Build.yml'
                }
            }
            stage("Enviando imagem para AWS"){
                steps {
                    ansiblePlaybook inventory: 'host', playbook: 'AWS.yml'
                }
            }
            stage("Deploy"){
                steps {
                    sh script : "sudo ansible-playbook Deploy.yml -i host"
                }
            }
        }
}